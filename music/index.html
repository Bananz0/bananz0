---
layout: default
title: Now Playing
---

<section class="music-hero">
    <div id="immersive-bg" class="immersive-bg"></div>
    <div class="music-container">
        <!-- 1. Centered Source Indicators (Top of everything) -->
        <div class="source-indicators">
            <a href="https://www.last.fm/user/Glenfire" target="_blank" class="source-pill" id="lastfm-indicator"
                data-source="lastfm">
                <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                    <path
                        d="M10.584 17.21l-.88-2.392s-1.43 1.594-3.573 1.594c-1.897 0-3.244-1.649-3.244-4.288 0-3.382 1.704-4.591 3.381-4.591 2.42 0 3.189 1.567 3.849 3.574l.88 2.749c.88 2.666 2.529 4.81 7.285 4.81 3.409 0 5.718-1.044 5.718-3.793 0-2.227-1.265-3.381-3.628-3.932l-1.758-.385c-1.21-.275-1.567-.77-1.567-1.595 0-.934.742-1.484 1.952-1.484 1.32 0 2.034.495 2.144 1.677l2.749-.33c-.22-2.474-1.924-3.492-4.729-3.492-2.474 0-4.893.935-4.893 3.932 0 1.87.907 3.051 3.189 3.601l1.87.44c1.402.33 1.869.907 1.869 1.704 0 1.017-.99 1.43-2.86 1.43-2.776 0-3.93-1.457-4.59-3.464l-.907-2.75c-1.155-3.573-2.997-4.893-6.653-4.893C2.144 5.333 0 7.89 0 12.233c0 4.18 2.144 6.434 5.993 6.434 3.106 0 4.591-1.457 4.591-1.457z" />
                </svg>
                <span>Last.fm</span>
                <div class="status-dot"></div>
            </a>
            <a href="https://open.spotify.com/user/31egxaxj3fm2oi624ykhkiygugpa" target="_blank" class="source-pill"
                id="spotify-indicator" data-source="spotify">
                <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                    <path
                        d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z" />
                </svg>
                <span>Spotify</span>
                <div class="status-dot"></div>
            </a>
        </div>

        <!-- 2. Split Content Row -->
        <div class="split-content-row">
            <!-- Left: Now Playing Card -->
            <div id="now-playing-card" class="now-playing-card" data-spring="smooth" data-bounce="1">
                <!-- Artist Background (blurred) -->
                <div class="artist-backdrop" id="artist-backdrop"></div>

                <div class="card-content">
                    <!-- Album Art with Artist Thumbnail -->
                    <div class="album-art-section">
                        <div class="album-art-container">
                            <img id="album-art" src="" alt="Album Art" class="album-art">
                            <div class="album-art-placeholder">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" />
                                </svg>
                            </div>
                            <div class="playing-indicator" id="playing-indicator">
                                <span></span><span></span><span></span>
                            </div>
                        </div>
                        <!-- Artist Thumbnail (circular, bottom-right of album art) -->
                        <div class="artist-thumbnail" id="artist-thumbnail-container">
                            <img id="artist-thumbnail" src="" alt="Artist">
                        </div>
                    </div>

                    <!-- Track Info -->
                    <div class="track-info">
                        <h2 id="track-name" class="track-name">Not Playing</h2>
                        <p id="artist-name" class="artist-name">â€”</p>
                        <p id="album-name" class="album-name"></p>
                    </div>

                    <!-- Track Meta -->
                    <div class="track-meta">
                        <span id="listening-status" class="listening-status">Waiting for data...</span>
                    </div>
                </div>
            </div>

            <!-- Right: Scrobble History -->
            <div class="recent-tracks" id="recent-tracks">
                <h3>Recently Played</h3>
                <ul id="recent-tracks-list"></ul>
            </div>
        </div>
    </div>
</section>

<!-- Inject API keys from Jekyll config (populated via environment variables at build time) -->
<script>
    window.MUSIC_CONFIG = {
        lastfm: {
            apiKey: '{{ site.lastfm_api_key | default: "" }}',
            username: '{{ site.lastfm_username | default: "glenfire" }}'
        },
        spotify: {
            enabled: true,
            workerUrl: '{{ site.spotify_worker_url | default: "" }}'
        }
    };
</script>

<link rel="stylesheet" href="{{ '/music/style.css' | relative_url }}">
<link rel="stylesheet" href="{{ '/music/music-header.css' | relative_url }}">
<script src="{{ '/music/app.js' | relative_url }}" defer></script>